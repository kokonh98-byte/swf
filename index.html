<!DOCTYPE html>
<html>
<head>
    <title>SWF –¢–µ—Å—Ç - –ë–∞–∑–æ–≤</title>
    <!-- –ò–∑–ø–æ–ª–∑–≤–∞–º–µ –æ—Ñ–∏—Ü–∏–∞–ª–Ω–∏—è Ruffle CDN -->
    <script src="https://ruffle.rs/ruffle.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        #test-area { margin: 20px 0; padding: 20px; background: white; border-radius: 10px; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        #result { margin-top: 20px; padding: 15px; background: #e8f4fd; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ Ruffle</h1>
    
    <div id="test-area">
        <h3>–¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ</h3>
        <button onclick="testFile()">–ü—Ä–æ–≤–µ—Ä–∏ game.swf —Ñ–∞–π–ª</button>
        <button onclick="testRuffle()">–ü—Ä–æ–≤–µ—Ä–∏ Ruffle –µ–º—É–ª–∞—Ç–æ—Ä</button>
        
        <h3>–¢–µ—Å—Ç 2: –ó–∞—Ä–µ–¥–∏ –∏–≥—Ä–∞—Ç–∞</h3>
        <div id="game-container" style="width:800px;height:600px;background:#000;margin:10px 0;"></div>
        <button onclick="loadGame()">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç–∏—Ä–∞–π –∏–≥—Ä–∞—Ç–∞</button>
    </div>
    
    <div id="result">–¢—É–∫ —â–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ...</div>

    <script>
        const resultDiv = document.getElementById('result');
        const gameContainer = document.getElementById('game-container');
        
        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ SWF —Ñ–∞–π–ª–∞ –µ –¥–æ—Å—Ç—ä–ø–µ–Ω
        function testFile() {
            resultDiv.innerHTML = "–ü—Ä–æ–≤–µ—Ä—è–≤–∞–º game.swf...";
            
            fetch('game.swf')
                .then(response => {
                    if (response.ok) {
                        const size = response.headers.get('content-length');
                        resultDiv.innerHTML = `‚úÖ –§–∞–π–ª—ä—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!<br>–†–∞–∑–º–µ—Ä: ${Math.round(size/1024)} KB`;
                    } else {
                        resultDiv.innerHTML = `‚ùå –§–∞–π–ª—ä—Ç –ù–ï —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ (–ì—Ä–µ—à–∫–∞ ${response.status})<br>
                        –û—Ç–∏–¥–µ—Ç–µ –Ω–∞: <a href="game.swf" target="_blank">game.swf</a> –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞`;
                    }
                })
                .catch(error => {
                    resultDiv.innerHTML = `‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—ä–ø –¥–æ —Ñ–∞–π–ª–∞: ${error.message}`;
                });
        }
        
        // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ Ruffle —Å–µ –µ –∑–∞—Ä–µ–¥–∏–ª
        function testRuffle() {
            resultDiv.innerHTML = "–ü—Ä–æ–≤–µ—Ä—è–≤–∞–º Ruffle...";
            
            if (window.RufflePlayer && window.RufflePlayer.newest) {
                resultDiv.innerHTML = "‚úÖ Ruffle –µ–º—É–ª–∞—Ç–æ—Ä—ä—Ç –µ –∑–∞—Ä–µ–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!";
                console.log("Ruffle –≤–µ—Ä—Å–∏—è:", window.RufflePlayer.newest().version);
            } else {
                resultDiv.innerHTML = "‚ùå Ruffle –ù–ï –µ –∑–∞—Ä–µ–¥–µ–Ω. –ü—Ä–æ–±–≤–∞–π—Ç–µ:<br>" +
                    "1. –ü—Ä–µ–∑–∞—Ä–µ–¥–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ (Ctrl+F5)<br>" +
                    "2. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –≤—Ä—ä–∑–∫–∞—Ç–∞<br>" +
                    "3. –û–ø–∏—Ç–∞–π—Ç–µ –¥—Ä—É–≥ –±—Ä–∞—É–∑—ä—Ä";
            }
        }
        
        // –¢–µ—Å—Ç 3: –û–ø–∏—Ç –∑–∞ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞
        function loadGame() {
            resultDiv.innerHTML = "–û–ø–∏—Ç–≤–∞–º –¥–∞ –∑–∞—Ä–µ–¥—è –∏–≥—Ä–∞—Ç–∞...";
            gameContainer.innerHTML = "";
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ Ruffle —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
            if (!window.RufflePlayer) {
                resultDiv.innerHTML = "‚ùå Ruffle –Ω–µ –µ –∑–∞—Ä–µ–¥–µ–Ω. –ü—ä—Ä–≤–æ –∏–∑–ø—ä–ª–Ω–µ—Ç–µ '–ü—Ä–æ–≤–µ—Ä–∏ Ruffle –µ–º—É–ª–∞—Ç–æ—Ä'";
                return;
            }
            
            try {
                const ruffle = window.RufflePlayer.newest();
                const player = ruffle.createPlayer();
                
                player.style.width = "100%";
                player.style.height = "100%";
                player.style.display = "block";
                
                gameContainer.appendChild(player);
                
                // –û–ø–∏—Ç–≤–∞–º–µ –¥–∞ –∑–∞—Ä–µ–¥–∏–º –∏–≥—Ä–∞—Ç–∞
                player.load("game.swf")
                    .then(() => {
                        resultDiv.innerHTML = "‚úÖ –ò–≥—Ä–∞—Ç–∞ —Å–µ –∑–∞—Ä–µ–∂–¥–∞!<br>" +
                            "–ê–∫–æ –µ –±–∞–≤–Ω–∞, —Ç–æ–≤–∞ –µ –ø—Ä–æ–±–ª–µ–º –Ω–∞ Ruffle –µ–º—É–ª–∞—Ç–æ—Ä–∞.";
                    })
                    .catch(error => {
                        resultDiv.innerHTML = `‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞:<br><strong>${error.message}</strong>`;
                        console.error("–î–µ—Ç–∞–π–ª–∏ –∑–∞ –≥—Ä–µ—à–∫–∞—Ç–∞:", error);
                    });
                    
            } catch (error) {
                resultDiv.innerHTML = `‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–ª–µ—ä—Ä:<br>${error.message}`;
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ç–µ—Å—Ç–≤–∞–Ω–µ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
        window.addEventListener('load', function() {
            setTimeout(() => {
                testFile();
                setTimeout(testRuffle, 1000);
            }, 500);
        });
    </script>
</body>
</html>
