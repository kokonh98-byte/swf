<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            height: 100vh;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        #game {
            width: 100%;
            height: 100vh;
        }
        
        #error {
            color: white;
            padding: 20px;
            text-align: center;
            background: #222;
            margin: 20px;
            border-radius: 10px;
            display: none;
        }
    </style>
    
    <!-- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ü–†–ï–î–ò –í–°–ò–ß–ö–û -->
    <script>
        window.RufflePlayer = window.RufflePlayer || {};
        window.RufflePlayer.config = {
            // –£–ö–ê–ñ–ï–¢–ï –ö–û–†–ï–ö–¢–ù–ò–¢–ï –ò–ú–ï–ù–ê –ù–ê –§–ê–ô–õ–û–í–ï–¢–ï
            publicPath: "",
            autoplay: "on",
            splashScreen: false,
            warnOnUnsupportedContent: false,
            logLevel: "warn",
            // –§–û–†–°–ò–†–ê–ù–ï –ù–ê –ö–û–ù–ö–†–ï–¢–ù–ò –§–ê–ô–õ–û–í–ï
            ruffleRuntimePath: "core.ruffle.b6412cfab79db596853.js",
            ruffleWasmPath: "ef02d3c9682b4c6e3a8c.wasm"
        };
    </script>
</head>
<body>
    <div id="game"></div>
    <div id="error"></div>
    
    <!-- –ó–ê–†–ï–ñ–î–ê–ù–ï –ù–ê Ruffle -->
    <script src="ruffle.js"></script>
    
    <script>
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∞
        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.innerHTML = `
                <h2>‚ùå –ì—Ä–µ—à–∫–∞</h2>
                <p>${message}</p>
                <p><strong>–ù–∞–ª–∏—á–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ:</strong></p>
                <div style="text-align:left; display:inline-block; background:#333; padding:10px; border-radius:5px;">
                    ${Array.from([
                        'game.swf',
                        'ruffle.js', 
                        'core.ruffle.b6412cfab79db596853.js',
                        'ef02d3c9682b4c6e3a8c.wasm',
                        'core.ruffle.3ad1817878ec7a02e93c.js',
                        '65354cfdba171b8ea1a9.wasm'
                    ]).map(f => `‚Ä¢ ${f}<br>`).join('')}
                </div>
                <p style="margin-top:15px; color:#ff9999;">
                    –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ <strong>ef02d3c9682b4c6e3a8c.wasm</strong> –∏ <strong>core.ruffle.b6412cfab79db596853.js</strong>
                </p>
            `;
            errorDiv.style.display = 'block';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞
        async function loadGame() {
            try {
                console.log('üîÑ –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ...');
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ Ruffle –µ –≥–æ—Ç–æ–≤
                if (!window.RufflePlayer || !window.RufflePlayer.newest) {
                    setTimeout(loadGame, 100);
                    return;
                }
                
                console.log('‚úÖ Ruffle –µ –∑–∞—Ä–µ–¥–µ–Ω');
                
                // –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–ª–µ—ä—Ä
                const ruffle = window.RufflePlayer.newest();
                const player = ruffle.createPlayer();
                
                // –î–æ–±–∞–≤—è–Ω–µ –∫—ä–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
                const gameDiv = document.getElementById('game');
                gameDiv.appendChild(player);
                
                // –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ SWF
                console.log('üìÅ –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ game.swf...');
                await player.load({
                    url: 'game.swf',
                    allowScriptAccess: true
                });
                
                console.log('üéÆ –ò–≥—Ä–∞—Ç–∞ –µ –∑–∞—Ä–µ–¥–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
                
            } catch (error) {
                console.error('‚ùå –ì—Ä–µ—à–∫–∞:', error);
                showError(`–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ: ${error.message}`);
            }
        }
        
        // –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
        document.addEventListener('DOMContentLoaded', function() {
            // –î–∞–π—Ç–µ –≤—Ä–µ–º–µ –Ω–∞ –≤—Å–∏—á–∫–∏ —Ä–µ—Å—É—Ä—Å–∏ –¥–∞ —Å–µ –∑–∞—Ä–µ–¥—è—Ç
            setTimeout(loadGame, 500);
        });
        
        // –ì—Ä–µ—à–∫–∏ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ä–µ—Å—É—Ä—Å–∏
        window.addEventListener('error', function(e) {
            console.error('–ì—Ä–µ—à–∫–∞ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞:', e);
            if (e.target && e.target.src) {
                console.log('–ì—Ä–µ—à–µ–Ω —Ñ–∞–π–ª:', e.target.src);
            }
        });
    </script>
</body>
</html>
