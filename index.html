<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Flash Game - Ready!</title>
    <style>
        /* –û–ü–†–ê–í–ï–ù CSS */
        html, body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #game-container {
            width: 596px;
            height: 428px;
            position: relative;
            border: 3px solid #4CAF50; /* –ó–µ–ª–µ–Ω–∞ —Ä–∞–º–∫–∞ –∑–∞ –≤–∏–¥–∏–º–æ—Å—Ç */
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
        }
        
        #click-to-start {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            text-align: center;
            z-index: 1000;
            cursor: pointer;
        }
        
        #click-to-start h2 {
            color: #4CAF50;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        #click-to-start p {
            margin: 10px;
            color: #ccc;
        }
        
        .pulse {
            animation: pulse 2s infinite;
            color: #FFD700;
            font-weight: bold;
            margin-top: 20px;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
    
    <script>
        // –û–ü–†–ê–í–ï–ù–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (–±–µ–∑ –≥—Ä–µ—à–∫–∏)
        window.RufflePlayer = window.RufflePlayer || {};
        window.RufflePlayer.config = {
            publicPath: "",
            autoplay: "on",
            unmuteOverlay: "hidden",
            backgroundColor: "#000000",
            letterbox: "off",  // –ú–ù–û–ì–û –í–ê–ñ–ù–û: "off" –∑–∞ –¥–∞ —Å–µ –≤–∏–¥–∏ –∏–≥—Ä–∞—Ç–∞
            scale: "showAll",
            quality: "high",
            allowScriptAccess: "always",
            // –û–ø—Ä–∞–≤–µ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Å–ø–æ—Ä–µ–¥ –≥—Ä–µ—à–∫–∏—Ç–µ
            maxExecutionDuration: 15,  // –ü–†–ê–í–ò–õ–ù–û: —Å–∞–º–æ —á–∏—Å–ª–æ
            contextMenu: "off",        // –ü–†–ê–í–ò–õ–ù–û: "off" –≤–º–µ—Å—Ç–æ false
            logLevel: "warn",
            splashScreen: false,
            preloader: false
        };
    </script>
</head>
<body>
    <div id="game-container">
        <!-- –ï–∫—Ä–∞–Ω –∑–∞ –∫–ª–∏–∫–≤–∞–Ω–µ (–º–Ω–æ–≥–æ –≤–∞–∂–µ–Ω –∑–∞ –∑–≤—É–∫–∞) -->
        <div id="click-to-start">
            <h2>üéÆ Flash Game Ready!</h2>
            <p>–†–∞–∑–º–µ—Ä: 596 √ó 428 –ø–∏–∫—Å–µ–ª–∞</p>
            <p>SWF –≤–µ—Ä—Å–∏—è: 41 | 30 FPS</p>
            <p>–°—Ç–∞—Ç—É—Å: –ò–≥—Ä–∞—Ç–∞ –µ –∑–∞—Ä–µ–¥–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!</p>
            <div class="pulse">‚ñº –ö–õ–ò–ö–ù–ò –¢–£–ö –ó–ê –î–ê –°–¢–ê–†–¢–ò–†–ê–® ‚ñº</div>
            <p style="font-size: 12px; margin-top: 30px; color: #888;">
                ‚ÑπÔ∏è –ò–≥—Ä–∞—Ç–∞ –º–æ–∂–µ –¥–∞ –∏–º–∞ –Ω–∞—á–∞–ª–µ–Ω —á–µ—Ä–µ–Ω –µ–∫—Ä–∞–Ω<br>
                ‚ÑπÔ∏è –ö–ª–∏–∫–≤–∞–Ω–µ—Ç–æ –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –∑–∞ –∑–≤—É–∫–∞
            </p>
        </div>
        
        <!-- –¢—É–∫ —â–µ —Å–µ –¥–æ–±–∞–≤–∏ Ruffle player -->
        <div id="ruffle-target"></div>
    </div>
    
    <script src="ruffle.js"></script>
    
    <script>
        let gamePlayer = null;
        let gameStarted = false;
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞
        function startGame() {
            if (gameStarted) return;
            gameStarted = true;
            
            console.log('üöÄ –°–¢–ê–†–¢–ò–†–ê–ù–ï –ù–ê –ò–ì–†–ê–¢–ê...');
            
            // –°–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–∞—á–∞–ª–Ω–∏—è –µ–∫—Ä–∞–Ω
            document.getElementById('click-to-start').style.display = 'none';
            
            // –ê–∫–æ –∏–≥—Ä–∞—Ç–∞ –≤–µ—á–µ –µ –∑–∞—Ä–µ–¥–µ–Ω–∞, –ø—Ä–æ—Å—Ç–æ —è —Ñ–æ–∫—É—Å–∏—Ä–∞–π
            if (gamePlayer) {
                console.log('–§–æ–∫—É—Å–∏—Ä–∞–Ω–µ –Ω–∞ –≤–µ—á–µ –∑–∞—Ä–µ–¥–µ–Ω–∞ –∏–≥—Ä–∞...');
                gamePlayer.focus();
                
                // –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –∑–≤—É–∫–∞
                activateAudio();
                return;
            }
            
            // –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤–∞ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è
            try {
                const ruffle = window.RufflePlayer.newest();
                gamePlayer = ruffle.createPlayer();
                
                // –ó–∞–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–æ—á–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä–∏
                gamePlayer.style.width = '596px';
                gamePlayer.style.height = '428px';
                gamePlayer.style.display = 'block';
                gamePlayer.style.backgroundColor = '#000000';
                
                // –î–æ–±–∞–≤—è–Ω–µ –∫—ä–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
                document.getElementById('ruffle-target').appendChild(gamePlayer);
                
                // –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ SWF
                console.log('–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ game.swf...');
                gamePlayer.load('game.swf').then(() => {
                    console.log('‚úÖ –ò–ì–†–ê–¢–ê –ï –°–¢–ê–†–¢–ò–†–ê–ù–ê!');
                    
                    // –§–æ–∫—É—Å –≤—ä—Ä—Ö—É –∏–≥—Ä–∞—Ç–∞
                    setTimeout(() => {
                        gamePlayer.focus();
                        activateAudio();
                        
                        // –ê–∫–æ –∏–≥—Ä–∞—Ç–∞ –µ —á–µ—Ä–Ω–∞, –ø—Ä–æ–±–≤–∞–π –¥–∞ —è "—Å—ä–±—É–¥–∏—à"
                        wakeUpGame();
                    }, 500);
                    
                }).catch(error => {
                    console.error('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ:', error);
                    showError(error.message);
                });
                
            } catch (error) {
                console.error('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:', error);
                showError(error.message);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –∑–≤—É–∫–∞ (–ú–ù–û–ì–û –í–ê–ñ–ù–ê)
        function activateAudio() {
            try {
                if (window.RufflePlayer && window.RufflePlayer.audioContext) {
                    if (window.RufflePlayer.audioContext.state === 'suspended') {
                        window.RufflePlayer.audioContext.resise().then(() => {
                            console.log('üîä –ê—É–¥–∏–æ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–æ!');
                        });
                    }
                }
            } catch (e) {
                console.warn('–ù–µ—É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –∞—É–¥–∏–æ:', e);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ "—Å—ä–±—É–∂–¥–∞–Ω–µ" –Ω–∞ –∏–≥—Ä–∞—Ç–∞ –∞–∫–æ –µ —á–µ—Ä–Ω–∞
        function wakeUpGame() {
            console.log('–ü—Ä–æ–±–≤–∞–º –¥–∞ "—Å—ä–±—É–¥—è" –∏–≥—Ä–∞—Ç–∞...');
            
            // –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å—Ç–∏–ª–æ–≤–µ –∑–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª–Ω–æ —Ä–µ-—Ä–µ–Ω–¥–∏—Ä–∞–Ω–µ
            if (gamePlayer) {
                setTimeout(() => {
                    gamePlayer.style.display = 'none';
                    setTimeout(() => {
                        gamePlayer.style.display = 'block';
                        console.log('–†–µ-—Ä–µ–Ω–¥–∏—Ä–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞');
                    }, 50);
                }, 1000);
            }
            
            // –û–ø–∏—Ç–∞–π –¥–∞ –∏–∑–ø—Ä–∞—Ç–∏—à fake —Å—ä–±–∏—Ç–∏—è –∫—ä–º –∏–≥—Ä–∞—Ç–∞
            setTimeout(() => {
                if (gamePlayer) {
                    // –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ fake –∫–ª–∏–∫ —Å—ä–±–∏—Ç–∏–µ
                    const clickEvent = new MouseEvent('click', {
                        view: window,
                        bubbles: true,
                        cancelable: true
                    });
                    gamePlayer.dispatchEvent(clickEvent);
                    
                    // –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ fake keydown —Å—ä–±–∏—Ç–∏–µ
                    const keyEvent = new KeyboardEvent('keydown', {
                        key: ' ',
                        code: 'Space'
                    });
                    gamePlayer.dispatchEvent(keyEvent);
                    
                    console.log('–ò–∑–ø—Ä–∞—Ç–µ–Ω–∏ fake —Å—ä–±–∏—Ç–∏—è –∫—ä–º –∏–≥—Ä–∞—Ç–∞');
                }
            }, 2000);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∞
        function showError(message) {
            document.getElementById('game-container').innerHTML = `
                <div style="color: white; padding: 30px; text-align: center; font-family: Arial;">
                    <h2 style="color: #ff5555;">‚ùå –ì—Ä–µ—à–∫–∞</h2>
                    <p style="background: #222; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        ${message}
                    </p>
                    <button onclick="location.reload()" style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px;">
                        üîÑ –û–ø—Ä–µ—Å–Ω–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
                    </button>
                    <button onclick="startGame()" style="padding: 10px 20px; background: #2196F3; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px;">
                        üîß –û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ
                    </button>
                </div>
            `;
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ Ruffle
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéÆ Flash Player –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ Ruffle –µ –∑–∞—Ä–µ–¥–µ–Ω
            const checkRuffle = setInterval(() => {
                if (window.RufflePlayer && window.RufflePlayer.newest) {
                    clearInterval(checkRuffle);
                    console.log('‚úÖ Ruffle –µ –∑–∞—Ä–µ–¥–µ–Ω –∏ –≥–æ—Ç–æ–≤!');
                    
                    // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –∏–≥—Ä–∞—Ç–∞
                    document.getElementById('click-to-start').innerHTML += `
                        <div style="margin-top: 20px; padding: 10px; background: rgba(76, 175, 80, 0.2); border-radius: 5px;">
                            ‚úÖ Ruffle 0.2.0 –∑–∞—Ä–µ–¥–µ–Ω<br>
                            ‚úÖ SWF —Ñ–∞–π–ª –Ω–∞–º–µ—Ä–µ–Ω<br>
                            ‚úÖ –û—á–∞–∫–≤–∞ –∫–ª–∏–∫ –∑–∞ —Å—Ç–∞—Ä—Ç
                        </div>
                    `;
                }
            }, 100);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ —Å–ª–µ–¥ 10 —Å–µ–∫—É–Ω–¥–∏ –∞–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –Ω–µ –∫–ª–∏–∫–Ω–µ
            setTimeout(() => {
                if (!gameStarted) {
                    console.log('–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ —Å–ª–µ–¥ 10 —Å–µ–∫—É–Ω–¥–∏...');
                    startGame();
                }
            }, 10000);
        });
        
        // –°—ä–±–∏—Ç–∏—è –∑–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
        document.getElementById('click-to-start').addEventListener('click', startGame);
        document.addEventListener('keydown', function(e) {
            if (!gameStarted && (e.code === 'Space' || e.code === 'Enter')) {
                startGame();
            }
        });
        
        // –î–µ–±—ä–≥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        console.log('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:', window.RufflePlayer.config);
        
    </script>
</body>
</html>
