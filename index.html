<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash Game on GitHub Pages</title>
    
    <!-- –ú–ù–û–ì–û –í–ê–ñ–ù–û: Ruffle –æ—Ç –æ—Ñ–∏—Ü–∏–∞–ª–Ω–∏—è –∏–º —Å–∞–π—Ç -->
    <script src="https://ruffle.rs/ruffle.js"></script>
    
    <style>
        /* –ú–∏–Ω–∏–º–∞–ª–µ–Ω CSS */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: #000;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        #container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #000;
        }
        
        #game-area {
            width: 596px;
            height: 428px;
            border: 3px solid #4CAF50;
            position: relative;
            background: #000;
        }
        
        #game {
            width: 100%;
            height: 100%;
        }
        
        #controls {
            margin-top: 20px;
            text-align: center;
        }
        
        .btn {
            padding: 10px 20px;
            margin: 5px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn:hover {
            background: #45a049;
        }
        
        #status {
            color: white;
            margin: 10px 0;
            min-height: 20px;
            text-align: center;
        }
        
        /* –ù–∞—á–∞–ª–µ–Ω –µ–∫—Ä–∞–Ω */
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            z-index: 100;
        }
        
        #start-screen h2 {
            color: #4CAF50;
            margin-bottom: 20px;
        }
        
        .blink {
            animation: blink 1s infinite;
            color: #FFD700;
            margin-top: 20px;
            font-weight: bold;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div id="container">
        <h1 style="color: #4CAF50; margin-bottom: 10px;">üéÆ Flash Game</h1>
        
        <div id="game-area">
            <!-- –ù–∞—á–∞–ª–µ–Ω –µ–∫—Ä–∞–Ω -->
            <div id="start-screen">
                <h2>Flash Game Loader</h2>
                <p>–†–∞–∑–º–µ—Ä: 596 √ó 428 –ø–∏–∫—Å–µ–ª–∞</p>
                <p>GitHub Pages Flash Player</p>
                <div class="blink">‚ñº –ö–õ–ò–ö–ù–ò –¢–£–ö –ó–ê –î–ê –°–¢–ê–†–¢–ò–†–ê–® ‚ñº</div>
                <p style="margin-top: 30px; font-size: 12px; color: #888;">
                    –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ Ruffle Flash –µ–º—É–ª–∞—Ç–æ—Ä
                </p>
            </div>
            
            <!-- –¢—É–∫ —â–µ —Å–µ –ø–æ—è–≤–∏ –∏–≥—Ä–∞—Ç–∞ -->
            <div id="game"></div>
        </div>
        
        <div id="status">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ Ruffle...</div>
        
        <div id="controls">
            <button class="btn" onclick="startGame()" id="startBtn">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç–∏—Ä–∞–π –∏–≥—Ä–∞—Ç–∞</button>
            <button class="btn" onclick="toggleFullscreen()">üì∫ –ü—ä–ª–µ–Ω –µ–∫—Ä–∞–Ω</button>
            <button class="btn" onclick="location.reload()">üîÑ –û–ø—Ä–µ—Å–Ω–∏</button>
        </div>
    </div>

    <script>
        // –ü—Ä–æ–º–µ–Ω–ª–∏–≤–∏
        let rufflePlayer = null;
        let gameStarted = false;
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å–∞
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
            console.log(message);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞
        function startGame() {
            if (gameStarted) return;
            gameStarted = true;
            
            // –°–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–∞—á–∞–ª–Ω–∏—è –µ–∫—Ä–∞–Ω
            document.getElementById('start-screen').style.display = 'none';
            updateStatus('–°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞...');
            
            // –ò–∑—á–∞–∫–≤–∞–Ω–µ –Ω–∞ Ruffle –¥–∞ —Å–µ –∑–∞—Ä–µ–¥–∏
            const waitForRuffle = setInterval(() => {
                if (window.RufflePlayer && window.RufflePlayer.newest) {
                    clearInterval(waitForRuffle);
                    loadGame();
                }
            }, 100);
            
            // –ê–∫–æ —Å–ª–µ–¥ 5 —Å–µ–∫—É–Ω–¥–∏ Ruffle –Ω–µ —Å–µ –µ –∑–∞—Ä–µ–¥–∏–ª
            setTimeout(() => {
                if (!window.RufflePlayer || !window.RufflePlayer.newest) {
                    clearInterval(waitForRuffle);
                    updateStatus('‚ùå Ruffle –Ω–µ —Å–µ –∑–∞—Ä–µ–¥–∏. –û–ø—Ä–µ—Å–Ω–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞.');
                    document.getElementById('start-screen').style.display = 'flex';
                    document.getElementById('start-screen').innerHTML = `
                        <div>
                            <h2 style="color:#ff5555;">‚ùå –ì—Ä–µ—à–∫–∞</h2>
                            <p>Ruffle –Ω–µ —Å–µ –∑–∞—Ä–µ–¥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.</p>
                            <button class="btn" onclick="location.reload()" style="margin-top:20px;">
                                üîÑ –û–ø—Ä–µ—Å–Ω–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
                            </button>
                            <p style="margin-top:20px; font-size:12px; color:#888;">
                                –ü—Ä–æ–±–≤–∞–π—Ç–µ –¥–∞ –æ—Ç–≤–æ—Ä–∏—Ç–µ: <br>
                                <a href="https://ruffle.rs/demo/" style="color:#4CAF50;" target="_blank">
                                    https://ruffle.rs/demo/
                                </a>
                            </p>
                        </div>
                    `;
                }
            }, 5000);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞
        function loadGame() {
            try {
                updateStatus('–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Flash Player...');
                
                // –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–ª–µ—ä—Ä
                const ruffle = window.RufflePlayer.newest();
                rufflePlayer = ruffle.createPlayer();
                
                // –ó–∞–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä–∏
                rufflePlayer.style.width = '100%';
                rufflePlayer.style.height = '100%';
                rufflePlayer.style.display = 'block';
                
                // –î–æ–±–∞–≤—è–Ω–µ –∫—ä–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
                document.getElementById('game').appendChild(rufflePlayer);
                
                updateStatus('–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ game.swf...');
                
                // –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ SWF —Ñ–∞–π–ª–∞
                rufflePlayer.load('game.swf')
                    .then(() => {
                        updateStatus('‚úÖ –ò–≥—Ä–∞—Ç–∞ –µ –∑–∞—Ä–µ–¥–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
                        
                        // –§–æ–∫—É—Å –≤—ä—Ä—Ö—É –∏–≥—Ä–∞—Ç–∞
                        setTimeout(() => {
                            rufflePlayer.focus();
                            // –ö–ª–∏–∫ –∑–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –∞—É–¥–∏–æ
                            rufflePlayer.click();
                        }, 500);
                    })
                    .catch(error => {
                        updateStatus(`‚ùå –ì—Ä–µ—à–∫–∞: ${error.message}`);
                        
                        // Fallback: –ø–æ–∫–∞–∂–∏ –¥–∏—Ä–µ–∫—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞
                        document.getElementById('game').innerHTML = `
                            <div style="color:white; padding:20px; text-align:center;">
                                <h3>–ù–µ—É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ</h3>
                                <p>${error.message}</p>
                                <p>–ú–æ–∂–µ—Ç–µ –¥–∞:</p>
                                <a href="game.swf" download style="color:#4CAF50; text-decoration:underline;">
                                    ‚¨áÔ∏è –°–≤–∞–ª–µ—Ç–µ SWF —Ñ–∞–π–ª–∞
                                </a>
                                <br><br>
                                <button class="btn" onclick="startGame()">
                                    üîß –û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ
                                </button>
                            </div>
                        `;
                    });
                    
            } catch (error) {
                updateStatus(`‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: ${error.message}`);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞ –ø—ä–ª–µ–Ω –µ–∫—Ä–∞–Ω
        function toggleFullscreen() {
            const gameArea = document.getElementById('game-area');
            
            if (!document.fullscreenElement) {
                if (gameArea.requestFullscreen) {
                    gameArea.requestFullscreen();
                } else if (gameArea.webkitRequestFullscreen) {
                    gameArea.webkitRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                }
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus('–û—á–∞–∫–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –¥–µ–π—Å—Ç–≤–∏–µ...');
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ —Å–ª–µ–¥ 3 —Å–µ–∫—É–Ω–¥–∏ –∞–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –≤–µ—á–µ –µ –∫–ª–∏–∫–Ω–∞–ª
            setTimeout(() => {
                if (document.hasFocus()) {
                    startGame();
                }
            }, 3000);
        });
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –ø—Ä–∏ –∫–ª–∏–∫
        document.getElementById('start-screen').addEventListener('click', startGame);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–µ –Ω–∞ –∫–ª–∞–≤–∏—à
        document.addEventListener('keydown', function(e) {
            if (!gameStarted && (e.code === 'Space' || e.code === 'Enter')) {
                startGame();
            }
        });
        
    </script>
</body>
</html>
